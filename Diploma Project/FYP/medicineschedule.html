<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <style>
    body {
 font-family: Arial, sans-serif;
 background-color: #f4f4f4;
 margin: 0;
 padding: 0;
}

.image-container {
 text-align: center;
 margin-top: 150px;
}

.image-container img {
 width: 100%;
 max-width: 150px;
 margin-bottom: 15px;

}

.image-container a {
 text-decoration: none;
 color: #333;
}

.image-container h4 {
 margin-top: 20px;
 padding-bottom: 40px;
}
.soup{
   position: relative;
   bottom: -0.7rem;
}
.image-container img.l{
   margin-bottom: 0%;
}
.image-container h4.game{
   margin-top: 5px;
   padding-bottom: 50px;
}
   .navbar {
     background-color: #e3f2fd;
   }
   .container {
     border-radius: 8px;
   }
  </style>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body style="background: url('images/hg.svg') no-repeat; background-size: cover">

<nav class="navbar navbar-expand-lg navbar-light">
  <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarNav">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item active">
        <a class="nav-link" href="main screen.html">Home</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="cognitivegames.html">Games</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="medicineschedule.html">Medicine</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="contact.html">Contact</a>
      </li>
      <!-- Add more navigation items as needed -->
    </ul>

    <!-- Logout button on the right side -->
    <ul class="navbar-nav ml-auto">
      <li class="nav-item">
        <a class="nav-link" onclick="logout()">Logout</a>
      </li>
    </ul>
  </div>
</nav>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>

<script>
  function logout() {
    // Clear user session or perform other logout actions
    // For this example, let's assume clearing a fictional user token
    localStorage.removeItem('userToken');
    window.alert("logout");

    // Redirect to the login page or any other desired destination
    window.location.href = "patient.html";
  }
</script>
<div class="container mt-5">
  <h1 class="text-center">Medicine Details</h1>

  <div id="medicineList" class="text-center">
    <div class="container">
      <div class="row">
        <div id="cardContainer" align="center" class="col-md-12">
          <!-- Cards will be dynamically added here -->
        </div>
      </div>
    </div>
  </div>

</div>

<!-- Bootstrap JS and Popper.js CDN -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

<!-- Custom JavaScript -->
<script>
  var storedMedicines;

  axios.get('http://localhost:8083/healthcare/addmedicine')
          .then(response => {
            storedMedicines = response.data;
            console.log(storedMedicines);
            renderCards(storedMedicines);

            // Automatically clear medicine details after 10 seconds
            setTimeout(() => {
              var cardContainer = document.getElementById('cardContainer');
              cardContainer.innerHTML = ''; // Clearing the HTML content

              // Delete medicine details from the database
              storedMedicines.forEach(medicine => {
                axios.post('http://localhost:8083/healthcare/deletemedicine', { id: medicine.id })
                        .then(response => {
                          console.log('Medicine details deleted successfully:', response.data);
                        })
                        .catch(error => {
                          console.error('Error deleting medicine details:', error);
                        });
              });
            }, 10000); //for one day=86400000
          })
          .catch(error => {
            console.error('Error fetching medicine details:', error);
            // Handle error
          });

  function createCard(medicine) {
    var cardHtml = `
        <div class="col-md-4">
          <div class="card">
            <div class="card-body">
              <h5 class="card-title">${medicine.medicineName}</h5>
              <p class="card-text">Start Date: ${medicine.startDate}</p>
              <p class="card-text">End Date: ${medicine.endDate}</p>
              <p class="card-text">Frequency: ${medicine.frequency}</p>
              <p class="card-text">Start Time: ${medicine.startTime}</p>
              <p class="card-text">Notes: ${medicine.notes}</p>
            </div>
          </div>
        </div>
      `;
    return cardHtml;
  }

  function renderCards(medicines) {
    var cardContainer = document.getElementById('cardContainer');
    medicines.forEach(function(medicine) {
      var cardHtml = createCard(medicine);
      cardContainer.innerHTML += cardHtml;
    });
  }
</script>
</body>
</html>
